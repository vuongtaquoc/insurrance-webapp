<form nz-form [formGroup]="form" class="companyAgencies-form">
  <div class="page-container">
    <div class="page-company" cardFullHeight>
      <div class="page-company__blank"></div>
      <div class="page-company__main">
        <h1>I. THÊM MỚI NHÂN VIÊN</h1>
        <div nz-row nzGutter="10">
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label class="text-left" [nzRequired]="true" [nzSpan]="6">
                {{ 'system.accounts.form.fullName' | translate }}</nz-form-label>
              <nz-form-control [nzSpan]="18" [nzErrorTip]="fullNameError">
                <input nz-input placeholder="{{ 'system.accounts.form.fullName' | translate }}"
                  formControlName="fullName" />
                <ng-template #fullNameError let-control>
                  <ng-container *ngIf="validateControl('fullName') && hasError('fullName', 'required')">
                    {{ 'system.accounts.form.fullName' | translate }} không được để trống
                  </ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
          </div>

          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label class="text-left" [nzRequired]="true" [nzSpan]="6">
                {{ 'system.accounts.form.tel' | translate }}</nz-form-label>
              <nz-form-control [nzSpan]="18" [nzErrorTip]="telError">
                <input nz-input placeholder="{{ 'system.accounts.form.tel' | translate }}" formControlName="tel" />
                <ng-template #telError let-control>
                  <ng-container *ngIf="validateControl('tel') && hasError('tel', 'required')">
                    {{ 'system.accounts.form.tel' | translate }} không được để trống
                  </ng-container>
                  <ng-container *ngIf="validateControl('tel') && hasError('tel', 'pattern')">
                    {{ 'system.accounts.form.tel' | translate }} số điện thoại không hợp lệ
                  </ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>

        <div nz-row nzGutter="10">
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label class="text-left" [nzRequired]="true" [nzSpan]="6">
                {{ 'system.accounts.form.userName' | translate }}</nz-form-label>
              <nz-form-control [nzSpan]="18" [nzErrorTip]="userNameError">
                <input nz-input placeholder="{{ 'system.accounts.form.userName' | translate }}"
                  formControlName="userName" />
                <ng-template #userNameError let-control>
                  <ng-container *ngIf="validateControl('userName') && hasError('userName', 'required')">
                    {{ 'system.accounts.form.userName' | translate }} không được để trống
                  </ng-container>
                  <ng-container *ngIf="validateControl('userName') && hasError('userName', 'minlength')">
                    {{ 'system.accounts.form.userName' | translate }} tối thiểu 6 ký tự
                  </ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
          </div><!-- col -->

          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label class="text-left" [nzRequired]="true" [nzSpan]="6">
                {{ 'system.accounts.form.passWord' | translate }}</nz-form-label>
              <nz-form-control [nzSpan]="18" [nzErrorTip]="nametpl">
                <input [readonly]="isEdit" type="password" nz-input
                  placeholder="{{ 'system.accounts.form.passWord' | translate }}" formControlName="passWord" />
                <ng-template #nametpl let-control>
                  <ng-container *ngIf="validateControl('passWord') && hasError('passWord', 'required')">
                    {{ 'system.accounts.form.passWord' | translate }} không được để trống
                  </ng-container>
                  <ng-container *ngIf="validateControl('passWord') && hasError('passWord', 'minlength')">
                    {{ 'system.accounts.form.passWord' | translate }} tối thiểu 6 ký tự
                  </ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
          </div><!-- col -->
        </div>

        <div nz-row nzGutter="10">
          <div nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label class="text-left" [nzRequired]="true" [nzSpan]="6">
                {{ 'system.accounts.form.email' | translate }}</nz-form-label>
              <nz-form-control [nzSpan]="18" [nzErrorTip]="emailError">
                <input nz-input placeholder="{{ 'system.accounts.form.email' | translate }}" formControlName="email" />
                <ng-template #emailError let-control>
                  <ng-container *ngIf="validateControl('email') && hasError('email', 'required')">
                    {{ 'system.accounts.form.email' | translate }} không được để trống
                  </ng-container>
                  <ng-container *ngIf="validateControl('email') && hasError('email', 'pattern')">
                    {{ 'system.accounts.form.email' | translate }} không đúng định dạng
                  </ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
          </div><!-- col -->
          <div nz-col [nzSpan]="12">
            <nz-checkbox-wrapper>
              <label nz-checkbox formControlName="status">{{ 'system.accounts.form.status' | translate }} </label>
            </nz-checkbox-wrapper>
          </div>
        </div>

        <div class="page-company__permission" style="margin-bottom: 20px;">
          <div class="page-title ">
            <h1>{{'system.accounts.permission.title' | translate}}</h1>
            <div class="page-declarations__footer"></div>
          </div>

          <nz-table nzBordered #ajaxTable nzShowSizeChanger [nzFrontPagination]="false" [nzData]="permissions"
            [nzLoading]="loading" [nzPageSize]="permissions.length" [nzShowPagination]="false" [nzLoading]="loading"
            [nzTotal]="total" class="table-editor table-permission" [nzScroll]="{ y: '300px' }">
            <thead (nzSortChange)="sort($event)" nzSortFn>
              <tr>
                <th nzWidth="60px" class="cell-custom" style="width: 50px;">{{'system.accounts.permission.stt' | translate}}</th>
                <th class="cell-custom" nzColumnKey="name">{{'system.accounts.permission.name' | translate}}</th>
                <th nzWidth="90px" class="cell-custom" nzColumnKey="tax">
                  <span>{{'system.accounts.permission.permission_READ' | translate}}</span></th>
                <th nzWidth="100px" class="cell-custom" nzColumnKey="delegate">
                  <span>{{'system.accounts.permission.permission_UPDATE' | translate}}</span></th>
                <th nzWidth="100px" class="cell-custom" nzColumnKey="delegate">
                  <span>{{'system.accounts.permission.permission_CREATE' | translate}}</span></th>
                <th nzWidth="100px" class="cell-custom" nzColumnKey="delegate">
                  <span>{{'system.accounts.permission.permission_DELETE' | translate}}</span></th>
                <th nzWidth="100px" class="cell-custom" nzColumnKey="delegate">
                  <span>{{'system.accounts.permission.permission_ACTIVATED' | translate}}</span></th>
                <th nzWidth="80px" class="cell-custom" nzColumnKey="delegate">
                  <span>{{'system.accounts.permission.permission_APPROVAL' | translate}}</span>
                </th>
              </tr>
            </thead>
            <tbody>

              <tr class="ui-table-custom-filter">
                <td></td>
                <td></td>
                <td [nzChecked]="false" (nzCheckedChange)="onAllChecked($event, 'permission_READ')"></td>
                <td [nzChecked]="false" (nzCheckedChange)="onAllChecked($event, 'permission_UPDATE')"></td>
                <td [nzChecked]="false" (nzCheckedChange)="onAllChecked($event, 'permission_CREATE')"></td>
                <td [nzChecked]="false" (nzCheckedChange)="onAllChecked($event, 'permission_DELETE')"></td>
                <td [nzChecked]="false" (nzCheckedChange)="onAllChecked($event, 'permission_ACTIVATED')"></td>
                <td [nzChecked]="false" (nzCheckedChange)="onAllChecked($event, 'permission_APPROVAL')"></td>
              </tr>

              <tr *ngFor="let data of ajaxTable.data;index as i">
                <td>{{i + 1}}</td>
                <td>{{ data.name }}</td>
                <td [nzChecked]="data.permission_READ"
                  (nzCheckedChange)="onItemChecked(data.actionId, $event, 'permission_READ')"></td>
                <td [nzChecked]="data.permission_UPDATE"
                  (nzCheckedChange)="onItemChecked(data.actionId, $event, 'permission_UPDATE')"></td>
                <td [nzChecked]="data.permission_CREATE"
                  (nzCheckedChange)="onItemChecked(data.actionId,  $event, 'permission_CREATE')"></td>
                <td [nzChecked]="data.permission_DELETE"
                  (nzCheckedChange)="onItemChecked(data.actionId, $event, 'permission_DELETE')"></td>
                <td [nzChecked]="data.permission_ACTIVATED"
                  (nzCheckedChange)="onItemChecked(data.actionId, $event, 'permission_ACTIVATED')"></td>
                <td [nzChecked]="data.permission_APPROVAL"
                  (nzCheckedChange)="onItemChecked(data.actionId, $event, 'permission_APPROVAL')"></td>
              </tr>
            </tbody>
          </nz-table>
        </div>


        <div nz-row nzGutter="8">
          <div nz-col nzMd="24" class="footer-botton">
            <button type="submit" [disabled]="!form.valid" class="employee-form__button-save" nz-button nzType="primary"
              (click)="save()">
              <i nz-icon nzType="save"></i>Lưu
            </button>
            <button class="employee-form__button-back" nz-button nzType="default" [routerLink]="['/accounts/list']">
              <i nz-icon nzType="stop"></i>Quay lại
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
